<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PoorBunny Chat</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/javascript">
    const { useState } = React;

    const ChatHeader = () => (
      <div className="chat-header">
        <h2>PoorBunny</h2>
        <div className="chat-bot-icon">
          <i className="fas fa-robot"></i>
        </div>
      </div>
    );

    const ChatInput = ({ onSendMessage }) => {
      const [message, setMessage] = useState('');

      const handleSubmit = (e) => {
        e.preventDefault();
        onSendMessage(message);
        setMessage('');
      };

      return (
        <form className="chat-input" onSubmit={handleSubmit}>
          <input
            type="text"
            value={message}
            onChange={(e) => setMessage(e.target.value)}
            placeholder="Tapez votre message ici..."
            autoFocus
          />
          <button type="submit">
            <i className="fas fa-paper-plane"></i>
          </button>
        </form>
      );
    };

    const Message = ({ content, isUser }) => (
      <div className={`message ${isUser ? 'user-message' : 'bot-message'}`}>
        <div className="message-content">{content}</div>
      </div>
    );

    const ChatMessages = ({ messages }) => (
      <div className="chat-messages">
        {messages.map((msg, index) => (
          <Message key={index} content={msg.content} isUser={msg.isUser} />
        ))}
      </div>
    );

    const ChatContainer = () => {
      const [messages, setMessages] = useState([
        { content: "Hi! I'm PoorBunny. How can I help you today?", isUser: false }
      ]);

      const getBotResponse = (userMessage) => {
        const message = userMessage.toLowerCase();
        
        if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
          return "Hello! How can I assist you today?";
        } else if (message.includes('how are you') || message.includes("how's it going")) {
          return "I'm just a program, so I don't have feelings, but thanks for asking! How about you?";
        } else if (message.includes('help') || message.includes('support')) {
          return "I can answer simple questions. Try asking me something!";
        } else if (message.includes('thank') || message.includes('thanks')) {
          return "You're welcome! Feel free to ask if you have other questions.";
        } else if (message.includes('goodbye') || message.includes('bye')) {
          return "Goodbye! Have a great day!";
        } else {
          return "I'm not sure I understand. Could you rephrase your question?";
        }
      };

      const handleSendMessage = (message) => {
        if (!message.trim()) return;
        
        // Add user message
        setMessages(prev => [...prev, { content: message, isUser: true }]);
        
        // Bot response after a short delay
        setTimeout(() => {
          const botResponse = getBotResponse(message);
          setMessages(prev => [...prev, { content: botResponse, isUser: false }]);
        }, 800);
      };

      return (
        <div className="chat-container">
          <ChatHeader />
          <ChatMessages messages={messages} />
          <ChatInput onSendMessage={handleSendMessage} />
        </div>
      );
    };

    // Render the ChatContainer component
    ReactDOM.render(<ChatContainer />, document.getElementById('root'));
  </script>
</body>
</html>
